## Пересмотр модели данных

Учебный проект со второго спринта курса Яндекс Практикум "Инженер данных".

В данном репозитории находятся следующие файлы:
- [Model_before.png](https://github.com/IgorGoltsov/portfolio/blob/main/Migration/Model_before.png) - Изображение изначальной модели данных 
- [Model_after.jpg](https://github.com/IgorGoltsov/portfolio/blob/main/Migration/Model_after.png) - Новая модель данных
- [MigrationScript.sql](https://github.com/IgorGoltsov/portfolio/blob/main/Migration/Migration.sql) - скрипт формирование новых таблиц и их заполнения

### Описание проекта

В рамках проекта необходимо сделать миграцию в отдельные логические таблицы, а затем собрать на них витрину данных. Это поможет оптимизировать нагрузку на хранилище и позволит аналитикам, перед которыми стоит задача построить анализ эффективности и прибыльности бизнеса, отвечать на точечные вопросы о тарифах вендоров, стоимости доставки в разные страны, количестве доставленных заказов за последнюю неделю. 

Интернет-магазину важно видеть, что сроки доставки соблюдаются, а её стоимость соответствует тарифам. Он платит за доставку самостоятельно, и стоимость доставки меняется в зависимости от страны — это базовая сумма, которую учитывает вендор. По договору он дополнительно получает прибыль за счет комиссии от вендора.

Но сейчас эти данные хранятся в одной таблице, shipping, где много дублирующейся и несистематизированной справочной информации. По сути там содержится весь лог доставки от момента оформления до выдачи заказа покупателю.

_

Таблица shipping, которая представляет собой последовательность действий при доставке, перечисленную ниже:

`shippingid` — уникальный идентификатор доставки.

`saleid` — уникальный идентификатор заказа. К одному заказу может быть привязано несколько строчек shippingid, то есть логов, с информацией о доставке.

`vendorid` — уникальный идентификатор вендора. К одному вендору может быть привязано множество saleid и множество строк доставки.

`payment` — сумма платежа (то есть дублирующаяся информация).

`shipping_plan_datetime` — плановая дата доставки.

`status` — статус доставки в таблице shipping по данному shippingid. Может принимать значения in_progress — доставка в процессе, либо finished — доставка завершена.

`state` — промежуточные точки заказа, которые изменяются в соответствии с обновлением информации о доставке по времени state_datetime.

`state_datetime` — время обновления состояния заказа.

`shipping_transfer_description` — строка со значениями transfer_type и transfer_model, записанными через :. Пример записи — 1p:car.

`transfer_type` — тип доставки. 1p означает, что компания берёт ответственность за доставку на себя, 3p — что за отправку ответственен вендор.

`transfer_model` — модель доставки, то есть способ, которым заказ доставляется до точки: car — машиной, train — поездом, ship — кораблем, airplane — самолетом, multiple — комбинированной доставкой.

`shipping_transfer_rate` — процент стоимости доставки для вендора в зависимости от типа и модели доставки, который взимается интернет-магазином для покрытия расходов.

`shipping_country` — страна доставки, учитывая описание тарифа для каждой страны.

`shipping_country_base_rate` — налог на доставку в страну, который является процентом от стоимости payment_amount.

`vendor_agreement_description` — строка, в которой содержатся данные agreementid, agreement_number, agreement_rate, agreement_commission, записанные через разделитель :. Пример записи — 12:vsp-34:0.02:0.023.

`agreementid` — идентификатор договора. agreement_number — номер договора в бухгалтерии. agreement_rate — ставка налога за стоимость доставки товара для вендора. 

`agreement_commission` — комиссия, то есть доля в платеже являющаяся доходом компании от сделки.
